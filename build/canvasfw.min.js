!function(){"use strict";function t(){function e(){l.resetTempCanvas()}function n(t){(a.width<t.width||a.height<t.height)&&(a.width=t.width,a.height=t.height)}function r(t){u.clearRect(0,0,t.width,t.height)}function i(t){u.drawImage(t,0,0)}function o(t){return u.getImageData(0,0,t.width,t.height)}if(t.prototype.singletonInstance)return t.prototype.singletonInstance;if(!(this instanceof t))return new t;t.prototype.singletonInstance=this;var a,u,l=this;return l.resetTempCanvas=function(){a=document.createElement("canvas"),u=a.getContext("2d")},l.getImageDataFromTag=function(t){return n(t),r(t),i(t),o(t)},e(),this}window.CanvasUtil=t}(),function(){"use strict";function t(e){function n(){e&&(e.imageData&&p.setImageData(e.imageData),p.x=e.x||0,p.y=e.y||0,p.onRollOver=e.onRollOver,p.onRollOut=e.onRollOut,p.onClick=e.onClick),h={}}function r(t,e){return t-p.x>=0&&e-p.y>=0&&t-(p.x+u.width)<=0&&e-(p.y+u.height)<=0}function i(){s=p.x,f=p.y}function o(t,e){return c[e*u.width+t]}if(!(this instanceof t))return new t(e);var a,u,l,c,s,f,p=this;p.x=0,p.y=0,p.onRollOver,p.onRollOut,p.onClick;var h;return p.getImageData=function(){return u},p.setImageData=function(t){u=t,l=u.data,c=new Uint32Array(l.buffer)},p.setRenderContext=function(t){a=t},p.render=function(){i(),a.putImageData(u,p.x,p.y)},p.clear=function(){a.clearRect(s-1,f-1,u.width+1,u.height+1)},p.update=function(){for(var t in h)h[t].update()},p.addTransition=function(t,e){e.target=p,h[t]=new Transition(e)},p.playTransition=function(t){h[t].play()},p.globalToLocal=function(t,e){return{x:t-p.x,y:e-p.y}},p.localToGlobal=function(t,e){return{x:p.x+t,y:p.y+e}},p.hasGlobalPixelAt=function(t,e){var n=!1;if(r(t,e)){var i=t-p.x,a=e-p.y,u=o(i,a);0!==u&&(n=!0)}return n},n(),this}window.Graphic=t}(),function(){"use strict";function t(e){function n(){}if(!(this instanceof t))return new t(e);return n(),this}window.Group=t}(),function(){"use strict";function t(e){function n(){c=document.createElement("canvas"),s=c.getContext("2d"),p=[],e&&(e.enableOnRollEvents&&m.enableOnRollEvents(),e.enableOnClickEvents&&m.enableOnClickEvents(),e.fullScreen&&m.enableFullScreen(),e.appendToBody&&document.body.appendChild(c))}function r(){g={position:c.style.position,left:c.style.left,top:c.style.top,width:c.width,height:c.height}}function i(){c.style.position="absolute",c.style.left="0",c.style.top="0",o()}function o(){c.width=window.innerWidth,c.height=window.innerHeight,m.render()}function a(){c.style.position=g.position,c.style.left=g.left,c.style.top=g.top,c.width=g.width,c.height=g.height}function u(t){var e=m.getGraphicAtPoint(t.clientX,t.clientY);e!==f&&(f&&f.onRollOut&&f.onRollOut.call(f),e&&e.onRollOver&&e.onRollOver.call(e),f=e)}function l(){var t=m.getGraphicAtPoint(event.clientX,event.clientY);t&&t.onClick&&t.onClick.call(t)}if(!(this instanceof t))return new t(e);var c,s,f,p,h,d,g,v,m=this;return m.getCanvas=function(){return c},m.enableOnRollEvents=function(){h||(c.addEventListener("mousemove",u),h=!0)},m.disableOnRollEvents=function(){h&&(c.removeEventListener("mousemove",u),h=!1)},m.enableOnClickEvents=function(){d||(c.addEventListener("click",l),d=!0)},m.disableOnClickEvents=function(){d&&(c.removeEventListener("click",l),d=!1)},m.enableFullScreen=function(){v||(r(),i(),window.addEventListener("resize",o),v=!0)},m.disableFullScreen=function(){v&&(window.removeEventListener("resize",o),a(),v=!1)},m.length=function(){return p.length},m.addGraphic=function(t){p.push(t),t.setRenderContext(s)},m.removeGraphic=function(t){t.clear();for(var e=0;e<p.length;e++)if(t===p[e])return void(p=p.slice(0,e).concat(p.slice(e+1)))},m.getGraphicAtPoint=function(t,e){for(var n=null,r=0;r<p.length;r++)p[r].hasGlobalPixelAt(t,e)&&(n=p[r]);return n},m.render=function(){for(var t=0;t<p.length;t++)p[t].clear(),p[t].render()},m.update=function(){for(var t=0;t<p.length;t++)p[t].update()},n(),this}window.Layer=t}(),function(){"use strict";function t(e){function n(){e?(i.renderCallback=e.renderCallback||d,i.updateCallback=e.updateCallback||d,i.measureCallback=e.measureCallback||d,i.setFramerate(e.frameRate||30)):(i.renderCallback=d,i.updateCallback=d,i.measureCallback=d,i.setFramerate(30)),u=0,l=0,c=0,s=0,f=0,p=0}function r(){for(u=(new Date).getTime(),f=u-l-s,i.updateCallback(),i.renderCallback(),l=(new Date).getTime(),c=l-u,s=a-c-f,0>=s&&(p-=s,s=2),h=setTimeout(r,s);p>a;)i.updateCallback(),p-=a;i.measureCallback()}if(t.prototype.singletonInstance)return t.prototype.singletonInstance;if(!(this instanceof t))return new t(e);t.prototype.singletonInstance=this;var i=this;i.renderCallback,i.updateCallback,i.measureCallback;var o=30;i.getFramerate=function(){return o},i.setFramerate=function(t){o=t,a=Math.round(1e3/o)};var a;i.getPeriod=function(){return a};var u;i.getBeforeTime=function(){return u};var l;i.getAfterTime=function(){return l};var c;i.getTimeDiff=function(){return c};var s;i.getSleepTime=function(){return s};var f;i.getOverSleepTime=function(){return f};var p;i.getExcess=function(){return p};var h,d=function(){};return i.start=function(){u=(new Date).getTime(),l=(new Date).getTime(),h=setTimeout(r,a)},i.stop=function(){clearTimeout(h)},n(),this}window.Timer=t}(),function(){"use strict";function t(e){function n(){e&&(l.duration=e.duration||1e3,l.property=e.property||"x",l.fromValue=e.from||0,l.toValue=e.to||1,l.target=e.target),l.steps=r(),l.reset(),u()}function r(){var t=[],e=l.duration/1e3*c.getFramerate(),n=l.toValue-l.fromValue,r=n/(e-1);t.push(l.fromValue);for(var i=1;e-1>i;i++)t.push(r*i+l.fromValue);return t.push(l.toValue),t}function i(){for(var e=t.prototype.transitions,n=!1,r=0;r<e.length;r++)o(e[r])&&(n=!0,e[r].reset());return n}function o(t){return t.property===l.property&&t.target===l.target&&t.isPlaying()&&t!==l}function a(){for(var t=l.target[l.property],e=l.steps[0],n=0,r=Math.abs(e-t),i=0;i<l.steps.length;i++)Math.abs(l.steps[i]-t)<r&&(r=Math.abs(e-t),e=l.steps[i],n=i);return n}function u(){t.prototype.transitions||(t.prototype.transitions=[]),t.prototype.transitions.push(l)}if(!(this instanceof t))return new t(e);var l=this,c=new Timer;l.duration,l.property,l.fromValue,l.toValue,l.steps,l.target;var s,f;return l.play=function(){var t=i();t&&(s=a()),f=!0},l.reset=function(){f=!1,s=0},l.pause=function(){f=!1},l.isPlaying=function(){return f},l.update=function(){f&&(l.target[l.property]=l.steps[s],s<l.steps.length-1?s++:l.reset())},n(),this}window.Transition=t}();