(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function CanvasUtil(){"use strict";function t(){h.resetTempCanvas()}function n(t){s.width<t.width&&(s.width=t.width),s.height<t.height&&(s.height=t.height)}function e(t){o.clearRect(0,0,t.width,t.height)}function i(t){o.drawImage(t,0,0)}function a(t){return o.getImageData(0,0,t.width,t.height)}if(CanvasUtil.prototype.singletonInstance)return CanvasUtil.prototype.singletonInstance;if(!(this instanceof CanvasUtil))return new CanvasUtil;CanvasUtil.prototype.singletonInstance=this;var s,o,h=this;return h.resetTempCanvas=function(){s=document.createElement("canvas"),o=s.getContext("2d")},h.getImageDataFromTag=function(t){return n(t),e(t),i(t),a(t)},t(),this}module.exports=new CanvasUtil;

},{}],2:[function(require,module,exports){
var Transform=require("./transform.js");module.exports=function n(t){"use strict";function e(){t&&(t.imageData&&x.setImageData(t.imageData),x.x=t.x||0,x.y=t.y||0,x.onRollOver=t.onRollOver,x.onRollOut=t.onRollOut,x.onClick=t.onClick,h=t.update||y)}function o(n,t){return n-x.x>=0&&t-x.y>=0&&n-(x.x+l.width)<=0&&t-(x.y+l.height)<=0}function a(){f=x.x,s=x.y}function r(n,t){return c[t*l.width+n]}if(!(this instanceof n))return new n(t);var i,l,u,c,f,s,x=this,y=function(){};x.x=0,x.y=0,x.onRollOver=null,x.onRollOut=null,x.onClick=null;var h=y;return x.getImageData=function(){return l},x.setImageData=function(n){l=n,u=l.data,c=new Uint32Array(u.buffer)},x.setRenderContext=function(n){i=n},x.render=function(){a(),i.putImageData(l,x.x,x.y)},x.clear=function(){i.clearRect(f-1,s-1,l.width+1,l.height+1)},x.update=function(){h.call(this)},x.globalToLocal=function(n,t){return{x:n-x.x,y:t-x.y}},x.localToGlobal=function(n,t){return{x:x.x+n,y:x.y+t}},x.hasGlobalPixelAt=function(n,t){var e=!1;if(o(n,t)){var a=n-x.x,i=t-x.y,l=r(a,i);0!==l&&(e=!0)}return e},e(),this};

},{"./transform.js":11}],3:[function(require,module,exports){
function ImageLoader(e){"use strict";function n(e){t(e),w=!1,m&&r()}function t(e){function n(){if(!(e.images&&e.images instanceof Array))throw new Error("Options object should have 'images' property (type of array) containing paths to the loaded images.");for(var n=0;n<e.images.length;n++){if(!e.images[n])throw new Error("Objects in 'images' cannot be null or undefined");if("string"!=typeof e.images[n]&&!e.images[n].hasOwnProperty("src"))throw new Error("Objects in 'images' property should have src property")}return e.images.slice(0)}function t(){if(e.onComplete&&"function"!=typeof e.onComplete)throw new Error("'onComplete' property should be a function");return s(e.onComplete,void 0)}function r(){if(e.onFileComplete&&"function"!=typeof e.onFileComplete)throw new Error("'onFileComplete' property should be a function");return s(e.onFileComplete,void 0)}function o(){if(e.onFileStart&&"function"!=typeof e.onFileStart)throw new Error("'onFileStart' property should be a function");return s(e.onFileStart,void 0)}function i(){return s(e.autoload,!0)}function a(){var n=s(e.numberOfThreads,1),t=parseInt(n);if(isNaN(t)||1>t)throw new Error("'numberOfThreads' should be integer number grater than 0");return t}function u(){var n=s(e.simulationDelayMin,void 0),t=parseInt(n);if("undefined"!=typeof n&&(isNaN(t)||0>t))throw new Error("'simulationDelayMin' should be a non-negative integer number");return"undefined"==typeof n&&(t=void 0),t}function f(){var n=s(e.simulationDelayMax,void 0),t=parseInt(n);if("undefined"!=typeof n&&(isNaN(t)||0>t))throw new Error("'simulationDelayMax' should be a non-negative integer number");return"undefined"==typeof n&&(t=void 0),t}function s(e,n){return"undefined"==typeof e?n:e}if(!e||"object"!=typeof e)throw new Error("Options should be an Object");p=new Queue(n()),h=t(),g=r(),y=o(),m=i(),c=a();var l=u(),d=f();ImageLoaderItem.setSimulationDelays(l,d)}function r(){w===!1&&f()===!1&&(w=!0,o())}function o(){for(var e=0;c>e;e++)new Thread({onThreadComplete:u,onFileComplete:i,onFileStart:a,queue:p})}function i(e){g&&g(e)}function a(e){y&&y(e)}function u(){f()&&h&&(w=!1,h())}function f(){return p.isComplete()}function s(){return p.getPercentLoaded()}function l(e){return p.getItemAt(e)}function d(){return p.length}if(!(this instanceof ImageLoader))return new ImageLoader(e);var m,p,c,h,g,y,w,v=this;return n(e),v.load=r,v.isComplete=f,v.getPercentLoaded=s,v.getItemAt=l,v.length=d,this}var Queue=require("./queue"),Thread=require("./thread"),ImageLoaderItem=require("./imageLoaderItem");module.exports=ImageLoader;

},{"./imageLoaderItem":4,"./queue":5,"./thread":6}],4:[function(require,module,exports){
function ImageLoaderItem(t){"use strict";function e(){n(),u()}function n(){for(var e in t)L[e]=t[e];L.tag=document.createElement("img")}function a(){L.status=f.FAILED}function i(){L.status=f.COMPLETE}function o(){L.status=f.LOADING}function u(){L.status=f.PENDING}function r(){L.tag.removeEventListener("load",s),L.tag.removeEventListener("error",m)}function s(t){ImageLoaderItem.simulationDelayMin?setTimeout(function(){d()},I()):d()}function m(t){ImageLoaderItem.simulationDelayMin?setTimeout(function(){c()},I()):c()}function d(){r(),i(),l(L),l=void 0}function c(){r(),L.tag=void 0,a(),l(L),l=void 0}function I(){var t=ImageLoaderItem.simulationDelayMax,e=ImageLoaderItem.simulationDelayMin;return Math.floor(Math.random()*(t-e)+e)}var l,f={PENDING:"pending",LOADING:"loading",COMPLETE:"complete",FAILED:"failed"},L=this;return e(),L.load=function(t){l=t,o(),L.tag.addEventListener("load",s),L.tag.addEventListener("error",m),L.tag.src=L.src},L.isPending=function(){return L.status===f.PENDING},L.isComplete=function(){return L.status===f.COMPLETE},L.isLoading=function(){return L.status===f.LOADING},L.isFailed=function(){return L.status===f.FAILED},this}module.exports=ImageLoaderItem,ImageLoaderItem.setSimulationDelays=function(t,e){var n=t,a=e;n&&!a?a=n:a&&!n&&(n=a),ImageLoaderItem.simulationDelayMin=n,ImageLoaderItem.simulationDelayMax=a};
},{}],5:[function(require,module,exports){
function Queue(e){"use strict";function n(){r=t(e),i.length=r.length}function t(e){for(var n=[],t=0;t<e.length;t++)"string"==typeof e[t]?n.push(new ImageLoaderItem({src:e[t]})):n.push(new ImageLoaderItem(e[t]));return n}var r,i=this;return i.length=0,n(),i.getItemAt=function(e){return r[e]},i.isComplete=function(){for(var e,n=!0,t=0;t<r.length;t++)if(e=r[t],e.isPending()||e.isLoading()){n=!1;break}return n},i.getNextPendingItem=function(){for(var e,n=0;n<r.length;n++)if(r[n].isPending()){e=r[n];break}return e},i.getPercentLoaded=function(){var e,n=0,t=r.length;for(n;t>n&&(e=r[n],!e.isPending()&&!e.isLoading());n++);return n/t},this}var ImageLoaderItem=require("./imageLoaderItem");module.exports=Queue;

},{"./imageLoaderItem":4}],6:[function(require,module,exports){
function Thread(e){"use strict";function t(){i=e.onThreadComplete,r=e.onFileComplete,u=e.onFileStart,d=e.queue,n()}function n(){var e=d.getNextPendingItem();"undefined"==typeof e?i():(e.load(o),u(e))}function o(e){r(e),n()}var i,r,u,d;return t(),this}module.exports=Thread;

},{}],7:[function(require,module,exports){
window.ImageLoader=require("./imageLoader/imageLoader.js"),window.Layer=require("./layer.js"),window.Transform=require("./transform.js"),window.TransformCache=require("./transformCache.js"),window.Graphic=require("./graphic.js"),window.Timer=require("./timer.js"),window.CanvasUtil=require("./canvasutil.js"),window.Shape=require("./shape.js");
},{"./canvasutil.js":1,"./graphic.js":2,"./imageLoader/imageLoader.js":3,"./layer.js":8,"./shape.js":9,"./timer.js":10,"./transform.js":11,"./transformCache.js":12}],8:[function(require,module,exports){
module.exports=function e(n){"use strict";function t(){s=n&&n.target?document.getElementById(n.target):document.createElement("canvas"),u=s.getContext("2d"),d=[],n&&(n.enableOnRollEvents&&w.enableOnRollEvents(),n.enableOnClickEvents&&w.enableOnClickEvents(),n.width&&(s.width=n.width),n.height&&(s.height=n.height),n.fullScreen&&w.enableFullScreen(),n.clickThrough&&(s.style["pointer-events"]="none"),n.appendToBody&&document.body.appendChild(s))}function i(){g={position:s.style.position,left:s.style.left,top:s.style.top,width:s.width,height:s.height}}function l(){s.style.position="absolute",s.style.left="0",s.style.top="0",o()}function o(){s.width=window.innerWidth,s.height=window.innerHeight,w.render()}function r(){s.style.position=g.position,s.style.left=g.left,s.style.top=g.top,s.width=g.width,s.height=g.height}function c(e){var n=w.getGraphicAtPoint(e.clientX,e.clientY);n!==h&&(h&&h.onRollOut&&h.onRollOut.call(h),n&&n.onRollOver&&n.onRollOver.call(n),h=n)}function a(e){var n=w.getGraphicAtPoint(event.clientX,event.clientY);n&&n.onClick&&n.onClick.call(n)}if(!(this instanceof e))return new e(n);var s,u,h,d,f,v,g,p,w=this;return w.getCanvas=function(){return s},w.getContext=function(){return u},w.enableOnRollEvents=function(){f||(s.addEventListener("mousemove",c),f=!0)},w.disableOnRollEvents=function(){f&&(s.removeEventListener("mousemove",c),f=!1)},w.enableOnClickEvents=function(){v||(s.addEventListener("click",a),v=!0)},w.disableOnClickEvents=function(){v&&(s.removeEventListener("click",a),v=!1)},w.enableFullScreen=function(){p||(i(),l(),window.addEventListener("resize",o),p=!0)},w.disableFullScreen=function(){p&&(window.removeEventListener("resize",o),r(),p=!1)},w.length=function(){return d.length},w.addGraphic=function(e){d.push(e),e.setRenderContext(u)},w.removeGraphic=function(e){e.clear();for(var n=0;n<d.length;n++)if(e===d[n])return void d.splice(n,1)},w.removeAllGraphics=function(){for(var e=0;e<d.length;e++)d[e].clear();d=[]},w.getGraphicAt=function(e){return d[e]},w.getGraphicAtPoint=function(e,n){for(var t=null,i=d.length-1;i>=0;i--)if(d[i].hasGlobalPixelAt(e,n)){t=d[i];break}return t},w.render=function(){var e;for(e=0;e<d.length;e++)d[e].clear();for(e=0;e<d.length;e++)d[e].render()},w.update=function(){for(var e=0;e<d.length;e++)d[e].update()},t(),this};
},{}],9:[function(require,module,exports){
"use strict";function Shape(t){function e(){t&&(u.x=t.x||0,u.y=t.y||0)}function n(t,e){d.push({member:t,type:p,arguments:e})}function i(t,e){d.push({member:t,type:h,value:e})}function o(t){t[0]+=u.x,t[1]+=u.y}function r(t){t>s.padding&&(s.padding=Math.ceil(t))}function f(t){s.hasOwnProperty("left")?c(t[0],t[1]):l(t[0],t[1])}function l(t,e){s.left=t,s.right=t,s.top=e,s.bottom=e,s.padding=0}function c(t,e){t<s.left?s.left=t:t>s.right&&(s.right=t+1),e<s.top?s.top=e:e>s.bottom&&(s.bottom=e)}if(!(this instanceof Shape))return new Shape(t);var a,u=this,p=0,h=1;u.x=0,u.y=0;var s={},d=[];return u.render=function(){for(var t,e=0;e<d.length;e++)t=d[e],t.type===p?a[t.member].apply(a,t.arguments):t.type===h&&(a[t.member]=t.value)},u.clear=function(){var t=s.left-s.padding,e=s.top-s.padding,n=s.right+s.padding,i=s.bottom+s.padding,o=n-t,r=i-e;a.clearRect(t,e,o,r)},u.setRenderContext=function(t){a=t},u.beginPath=function(){n("beginPath",arguments)},u.closePath=function(){n("closePath",arguments)},u.moveTo=function(t,e){o(arguments),f(arguments),n("moveTo",arguments)},u.lineTo=function(t,e){o(arguments),f(arguments),n("lineTo",arguments)},u.fill=function(){n("fill",arguments)},u.stroke=function(){n("stroke",arguments)},Object.defineProperty(this,"fillStyle",{set:function(t){i("fillStyle",t)}}),Object.defineProperty(this,"strokeStyle",{set:function(t){i("strokeStyle",t)}}),Object.defineProperty(this,"lineCap",{set:function(t){i("lineCap",t)}}),Object.defineProperty(this,"lineWidth",{set:function(t){i("lineWidth",t),r(t/2)}}),u.box=function(t,e,n,i){u.beginPath(),u.moveTo(t,e),u.lineTo(n+t,e),u.lineTo(n+t,i+e),u.lineTo(t,i+e),u.closePath()},e(),this}module.exports=Shape;

},{}],10:[function(require,module,exports){
module.exports=function e(t){"use strict";function a(){t?(n.renderCallback=t.renderCallback||k,n.updateCallback=t.updateCallback||k,n.measureCallback=t.measureCallback||k,n.setFramerate(t.frameRate||30)):(n.renderCallback=k,n.updateCallback=k,n.measureCallback=k,n.setFramerate(30)),l=0,c=0,o=0,s=0,f=0,m=0}function r(e){for(l=(new Date).getTime(),f=l-c-s,n.updateCallback(),n.renderCallback(),c=(new Date).getTime(),o=c-l,s=i-o-f,0>=s&&(m-=s,s=2),b=setTimeout(r,s);m>i;)n.updateCallback(),m-=i;n.measureCallback()}if(e.prototype.singletonInstance)return e.prototype.singletonInstance;if(!(this instanceof e))return new e(t);e.prototype.singletonInstance=this;var n=this;n.renderCallback,n.updateCallback,n.measureCallback;var u=30;n.getFramerate=function(){return u},n.setFramerate=function(e){u=e,i=Math.round(1e3/u)};var i;n.getPeriod=function(){return i};var l;n.getBeforeTime=function(){return l};var c;n.getAfterTime=function(){return c};var o;n.getTimeDiff=function(){return o};var s;n.getSleepTime=function(){return s};var f;n.getOverSleepTime=function(){return f};var m;n.getExcess=function(){return m};var b,k=function(){};return n.start=function(){l=(new Date).getTime(),c=(new Date).getTime(),b=setTimeout(r,i)},n.stop=function(){clearTimeout(b)},a(),this};

},{}],11:[function(require,module,exports){
function Transform(r,a){"use strict";function n(){o=new TransformCache(r,4)}function e(r,n,e){for(var t=r.data.buffer,i=new ArrayBuffer(r.data.length),m=new Uint32Array(t),s=new Uint32Array(i),u=(new Uint8ClampedArray(t),new Uint8ClampedArray(i)),f=a.createImageData(r),d=m.length,c=r.width,g=0;d>g;g++)n(g,m,s,e,o.data,c);return f.data.set(u),f}function t(r,n){var e=m,t=a.createImageData(e),o=e.data,i=t.data,s=[],u=i.length,f={imageData:e};n=n||{};for(var d in n)f[d]=n[d];for(var c=0;u>c;c+=4)f.r=o[c],f.g=o[c+1],f.b=o[c+2],f.a=o[c+3],f.x=c%(e.width<<2)>>2,f.y=Math.floor(c/(e.width<<2)),s=r(f),i[c]=s[0],i[c+1]=s[1],i[c+2]=s[2],i[c+3]=s[3];return t}if(!(this instanceof Transform))return new Transform(imageData);var o,i=this,m=r;i.getImageData=function(){return m},i["do"]=function(r,a){m=e(m,r,a)},i.doOld=function(r,a){m=t(r,a)},i.reset=function(){m=r},n()}function getGetColorFromGradient(r,a,n){return r-n*(r-a)}var TransformCache=require("./transformCache.js");module.exports=Transform,Transform.sampleLinear=function(r,a,n){var e=r.data,t=n*(r.width<<2)+(a<<2);return[e[t],e[t+1],e[t+2],e[t+3]]},Transform.distance=function(r,a,n,e){var t=r-n,o=a-e;return Math.sqrt(t*t+o*o)},Transform.degreesToRadians=function(r){return r/180*3.14159265},Transform.Invert=function(r){return[255-r.r,255-r.g,255-r.b,r.a]},Transform.GrayScale=function(r){var a=(r.r+r.g+r.b)/3;return[a,a,a,r.a]},Transform.Alpha=function(r){return[r.r,r.g,r.b,r.value]},Transform.WeightedAlphaBlend=function(r){var a=Transform.sampleLinear(r.imageData2,r.x,r.y),n=a[3],e=n/255;return 255===n?[a[0],a[1],a[2],a[3]]:0===n?[r.r,r.g,r.b,r.a]:[getGetColorFromGradient(r.r,a[0],e),getGetColorFromGradient(r.g,a[1],e),getGetColorFromGradient(r.b,a[2],e),r.a>n?r.a:n]},Transform.Rotate=function(r){var a=r.degree,n=Transform.degreesToRadians(a),e=Math.round(r.x*Math.cos(n)-r.y*Math.sin(n)),t=Math.round(r.x*Math.sin(n)+r.y*Math.cos(n));return Transform.sampleLinear(r.imageData,e,t)},Transform.Swirl=function(r,a,n,e,t,o){var i=t[r];if(i.approximate)return void Transform.SwirlApproximation(r,a,n,e,t,o);var m=e.originX,s=e.originY,u=e.radius,f=i.x-m,d=i.y-s,c=Math.sqrt(f*f+d*d),g=e.angle*c,l=Math.cos(g)*u,h=Math.sin(g)*u;l=i.x+l|0,h=i.y+h|0,0>l||0>h||(n[r]=a[h*o+l],i.tx=l,i.ty=h)},Transform.SwirlApproximation=function(r,a,n,e,t,o){},Transform.SwirlOld=function(r){var a=r.originX,n=r.originY,e=r.degree,t=r.radius,o=Transform.distance(r.x,r.y,a,n),i=Transform.degreesToRadians(e*o),m=a+Math.cos(i)*t,s=n-Math.sin(i)*t;return m-=a,s-=n,m=Math.round(r.x-m),s=Math.round(r.y-s),Transform.sampleLinear(r.imageData,m,s)},Transform.descriptions={Invert:{arguments:[]},GrayScale:{arguments:[]},Alpha:{arguments:[{name:"value",min:0,max:255,"default":255,type:"number",description:"Control the alpha channel of pixels."}]},Rotate:{arguments:[]},Swirl:{arguments:[{name:"originX",min:Number.MIN_VALUE,max:Number.MAX_VALUE,"default":0,type:"number",description:"Center position of the transform on X axis."},{name:"originY",min:Number.MIN_VALUE,max:Number.MAX_VALUE,"default":0,type:"number",description:"Center position of the transform on Y axis."},{name:"angle",min:Number.MIN_VALUE,max:Number.MAX_VALUE,"default":.0349,type:"number",description:"Angle of the twist in radians."},{name:"radius",min:Number.MIN_VALUE,max:Number.MAX_VALUE,"default":20,type:"number",description:""}]}};

},{"./transformCache.js":12}],12:[function(require,module,exports){
function TransformCache(t,e){"use strict";function r(){e=e||2,e=1>e?1:e,i.createCache()}if(!(this instanceof TransformCache))return new TransformCache(t);var a,i=this;Object.defineProperty(this,"data",{get:function(){return a}}),i.createCache=function(){a=[];for(var r,n,o,c,f,h,s,u=t.width,p=t.height,d=u*p,m=0;d>m;m++)o=m%u,c=Math.floor(m/u),s=i.isApproximated(u,p,o,c),r=c*u+u-1,n=(p-1)*u+o,c%e===0||c===p-1?(f=m-o%e,h=m+(e-o%e),h=h>r?r:h):o%e===0||o===u-1?(f=m-c%e*u,h=m+(e-c%e)*u,h=h>n?n:h):(f=void 0,h=void 0),a.push({approximate:s,ai1:f,ai2:h,x:o,y:c,i:m,tx:0,ty:0})},i.isApproximated=function(t,r,a,i){return!(i%e===0&&a%e===0||a===t-1||i===r-1)},r()}module.exports=TransformCache;

},{}]},{},[7]);
