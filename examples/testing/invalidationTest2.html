<!DOCTYPE html>
<html>
<head>
    <title>canvas fw: Graphic click test</title>
    <script src="../../bower_components/tweenjs/build/tween.min.js"></script>
    <script src="../../build/canvas-framework.js"></script>
</head>

<body style="background-color: #AAAAAA;">

    <div class="output"></div>

    <script>
        (function(){

            var layer = new Layer({
                appendToBody: true,
                fullScreen: true
            });

            var images = [
                {src: '../../sampleImages/sample1_tb.png', name: 'purple', y:100, x:100},
                {src: '../../sampleImages/sample2_tb.png', name: 'blue', y:100, x:300},
                {src: '../../sampleImages/sample3_tb.png', name: 'orange', y:150, x:150}
            ];

            // for(var i = 0; i < 1; i++)
            // {
            //     var x = Math.floor((Math.random() * 500) + 200);
            //     var y = Math.floor((Math.random() * 500) + 200);
            //     images.push({src: '../../sampleImages/sample3_tb.png', name: 'orange', y:x, x:y})
            // }

            var loader = new ImageLoader({
                images:images,
                onComplete: onComplete
            });

            var mouseX = 0;
            var mouseY = 0;

            function onComplete()
            {
                for(var i = 0; i < loader.length(); i++)
                {
                    addGraphic(loader.getItemAt(i));
                }

                layer.getCanvas().addEventListener('mousemove', function(event) {
                    mouseX = event.x;
                    mouseY = event.y;
                });

                window.requestAnimationFrame(animationLoop);
            }

            function addGraphic(loaderItem)
            {
                var graphic = new Graphic({
                    imageData: CanvasUtil.getImageDataFromTag(loaderItem.tag),
                    x: loaderItem.x,
                    y: loaderItem.y,
                });

                graphic.name = loaderItem.name;

                layer.addGraphic(graphic);
            }

            function animationLoop(time)
            {
                if(layer.length())
                {
                    var graphic = layer.getGraphicAt(1);
                    graphic.x = mouseX;
                    graphic.y = mouseY;
                }


                layer.render();
                window.requestAnimationFrame(animationLoop);
            }



        })();


    </script>
</body>
</html>