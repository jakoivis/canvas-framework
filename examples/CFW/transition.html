<!DOCTYPE html>
<html>
<head>
    <title>canvas fw test: Animate with timer</title>

    <script src="../../bower_components/ImageLoader/build/ImageLoader.min.js"></script>
    <script src="../../build/canvasfw.js"></script>

</head>

<body style="background-color: #AAAAAA;">

    <script>
        (function(){

            var layer = new Layer();
            layer.enableFullScreen();
            layer.enableOnRollEvents();
            document.body.appendChild(layer.getCanvas());

            var loader = new ImageLoader({
                images:['../assets/sample1_tb.png'],
                onComplete: onComplete,
            });

            function onComplete()
            {
                var canvasutil = new CanvasUtil();
                var imageData = canvasutil.getImageDataFromTag(loader.getItemAt(0).tag);
                var graphic1 = new Graphic({imageData: imageData, x: 10, y: 10});

                layer.addGraphic(graphic1);

                var timer = new Timer({
                    renderCallback: renderHandler,
                    updateCallback: updateHandler,
                    frameRate: 30
                });

                timer.start();

                graphic1.addTransition("fadeIn", {
                    duration: 500,
                    from: 10,
                    to: 30
                });
                graphic1.addTransition("fadeOut", {
                    duration: 500,
                    from: 30,
                    to: 10
                });

                graphic1.onRollOver = rollOverHandler;
                graphic1.onRollOut = rollOutHandler;

                function renderHandler()
                {
                    layer.render();
                }

                function updateHandler()
                {
                    layer.update();
                }

                function rollOverHandler()
                {
                    this.playTransition("fadeIn");
                }

                function rollOutHandler()
                {
                    this.playTransition("fadeOut");
                }
            }
        })();


    </script>
</body>
</html>